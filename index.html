<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #020408;
  --accent: #00ffe7;
  --accent2: #ff00aa;
  --accent3: #ffe100;
  --text: #e0f7ff;
  --muted: #3a5a66;
  --panel: rgba(0,20,30,0.88);
  --error: #ff3a6e;
  --success: #00ffe7;
}

html, body {
  height: 100%;
  font-family: 'Share Tech Mono', monospace;
  background: var(--bg);
  color: var(--text);
  overflow: hidden;
}

/* ── BG ── */
#bg-canvas { position: fixed; inset: 0; z-index: 0; }

.particles { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
.particle {
  position: absolute; border-radius: 50%;
  animation: floatUp linear infinite; opacity: 0;
}
@keyframes floatUp {
  0%   { transform: translateY(100vh) scale(0); opacity: 0; }
  10%  { opacity: 1; }
  90%  { opacity: 0.6; }
  100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
}

.scanlines {
  position: fixed; inset: 0; z-index: 2; pointer-events: none;
  background: repeating-linear-gradient(to bottom, transparent, transparent 2px, rgba(0,0,0,0.18) 2px, rgba(0,0,0,0.18) 4px);
}
.scan-beam {
  position: fixed; left: 0; right: 0; height: 3px; z-index: 3; pointer-events: none;
  background: linear-gradient(90deg, transparent, rgba(0,255,231,0.4), transparent);
  animation: beamSweep 4s ease-in-out infinite;
}
@keyframes beamSweep {
  0%   { top: -3px; opacity: 0; }
  5%   { opacity: 1; }
  95%  { opacity: 1; }
  100% { top: 100vh; opacity: 0; }
}

.corner { position: fixed; width: 60px; height: 60px; z-index: 4; pointer-events: none; }
.corner-tl { top:20px; left:20px; border-top:2px solid var(--accent); border-left:2px solid var(--accent); }
.corner-tr { top:20px; right:20px; border-top:2px solid var(--accent2); border-right:2px solid var(--accent2); }
.corner-bl { bottom:20px; left:20px; border-bottom:2px solid var(--accent2); border-left:2px solid var(--accent2); }
.corner-br { bottom:20px; right:20px; border-bottom:2px solid var(--accent); border-right:2px solid var(--accent); }
.corner::before {
  content:''; position:absolute; width:6px; height:6px; border-radius:50%;
  background:var(--accent); animation: blinkDot 1.5s ease-in-out infinite;
}
.corner-tl::before { top:-3px; left:-3px; }
.corner-tr::before { top:-3px; right:-3px; background:var(--accent2); }
.corner-bl::before { bottom:-3px; left:-3px; background:var(--accent2); }
.corner-br::before { bottom:-3px; right:-3px; }
@keyframes blinkDot {
  0%,100% { opacity:1; box-shadow:0 0 8px currentColor; }
  50% { opacity:0.2; }
}

.ticker {
  position:fixed; bottom:0; left:0; right:0; height:28px; z-index:10;
  background:rgba(0,255,231,0.05); border-top:1px solid rgba(0,255,231,0.2);
  overflow:hidden; display:flex; align-items:center;
}
.ticker-inner {
  display:flex; gap:80px; white-space:nowrap; font-size:10px; color:var(--muted); letter-spacing:0.1em;
  animation: tickerScroll 30s linear infinite;
}
@keyframes tickerScroll {
  0%   { transform:translateX(100vw); }
  100% { transform:translateX(-100%); }
}

/* ── SHARED CARD SHELL ── */
.page-wrapper {
  position: fixed; inset: 0; z-index: 5;
  display: flex; align-items: center; justify-content: center; flex-direction: column;
}

.system-id {
  font-size:10px; letter-spacing:0.3em; color:var(--muted); text-transform:uppercase;
  margin-bottom:26px; animation: fadeSlideDown 1s 0.2s both;
}
.system-id span { color:var(--accent); }

@keyframes fadeSlideDown {
  from { opacity:0; transform:translateY(-20px); }
  to   { opacity:1; transform:translateY(0); }
}

.card {
  position:relative; width:460px;
  background:var(--panel); border:1px solid rgba(0,255,231,0.25);
  padding:40px 44px 34px; backdrop-filter:blur(20px);
  animation: cardReveal 0.8s 0.4s cubic-bezier(0.16,1,0.3,1) both;
  box-shadow:0 0 60px rgba(0,255,231,0.06), inset 0 0 60px rgba(0,0,0,0.4);
}
@keyframes cardReveal {
  from { opacity:0; transform:scale(0.9) translateY(20px); }
  to   { opacity:1; transform:scale(1) translateY(0); }
}
.card::before {
  content:''; position:absolute; inset:-1px; z-index:-1; opacity:0.6;
  background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3),var(--accent));
  background-size:300% 100%; animation:borderFlow 4s linear infinite;
}
.card::after { content:''; position:absolute; inset:0; z-index:-1; background:var(--panel); }
@keyframes borderFlow {
  0%   { background-position:0% 0%; }
  100% { background-position:300% 0%; }
}
.card > * { position:relative; z-index:1; }

/* Logo */
.logo-area { text-align:center; margin-bottom:28px; }
.logo-icon {
  width:52px; height:52px; border:2px solid var(--accent);
  margin:0 auto 14px; display:flex; align-items:center; justify-content:center;
  position:relative; animation:rotateBorder 6s linear infinite;
}
@keyframes rotateBorder {
  0%   { border-color:var(--accent);  box-shadow:0 0 20px rgba(0,255,231,0.4); }
  33%  { border-color:var(--accent2); box-shadow:0 0 20px rgba(255,0,170,0.4); }
  66%  { border-color:var(--accent3); box-shadow:0 0 20px rgba(255,225,0,0.4); }
  100% { border-color:var(--accent);  box-shadow:0 0 20px rgba(0,255,231,0.4); }
}
.logo-icon svg { width:26px; height:26px; fill:var(--accent); animation:iconPulse 2s ease-in-out infinite; }
@keyframes iconPulse { 0%,100%{transform:scale(1);opacity:1;} 50%{transform:scale(0.88);opacity:0.6;} }
.logo-ring {
  position:absolute; border:1px solid rgba(0,255,231,0.2); border-radius:50%;
  top:50%; left:50%; transform:translate(-50%,-50%); animation:ringPulse 2s ease-out infinite;
}
@keyframes ringPulse { 0%{width:52px;height:52px;opacity:0.8;} 100%{width:100px;height:100px;opacity:0;} }
.logo-title {
  font-family:'Orbitron',sans-serif; font-size:18px; font-weight:900; letter-spacing:0.15em;
  background:linear-gradient(90deg,var(--accent),#fff,var(--accent2)); background-size:200% auto;
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  animation:shimmer 3s linear infinite;
}
@keyframes shimmer { 0%{background-position:0% center;} 100%{background-position:200% center;} }
.logo-sub { font-size:9px; letter-spacing:0.25em; color:var(--muted); text-transform:uppercase; margin-top:4px; }

/* Tab switcher */
.tab-bar {
  display:flex; gap:0; margin-bottom:28px;
  border:1px solid rgba(0,255,231,0.15); overflow:hidden;
}
.tab-btn {
  flex:1; padding:10px; background:transparent; border:none;
  color:var(--muted); font-family:'Share Tech Mono',monospace; font-size:10px;
  letter-spacing:0.2em; text-transform:uppercase; cursor:pointer;
  transition:all 0.3s; position:relative; overflow:hidden;
}
.tab-btn.active {
  background:rgba(0,255,231,0.1); color:var(--accent);
  box-shadow:inset 0 -2px 0 var(--accent);
}
.tab-btn:not(.active):hover { background:rgba(0,255,231,0.04); color:rgba(0,255,231,0.5); }

/* Fields */
.field { margin-bottom:18px; }
label {
  display:flex; align-items:center; gap:8px; font-size:9px;
  letter-spacing:0.2em; text-transform:uppercase; color:var(--muted); margin-bottom:7px;
}
label::before { content:'//'; color:var(--accent); font-size:11px; }
.input-wrap { position:relative; }
input[type=text], input[type=password] {
  width:100%; background:rgba(0,255,231,0.04); border:1px solid rgba(0,255,231,0.15);
  color:var(--text); font-family:'Share Tech Mono',monospace; font-size:14px;
  padding:12px 16px; outline:none; transition:all 0.3s; letter-spacing:0.05em;
}
input[type=text]:focus, input[type=password]:focus {
  border-color:var(--accent); background:rgba(0,255,231,0.08);
  box-shadow:0 0 0 3px rgba(0,255,231,0.06), 0 0 20px rgba(0,255,231,0.1);
}
input::placeholder { color:var(--muted); }
.input-line {
  position:absolute; bottom:0; left:0; height:2px; width:0; pointer-events:none;
  background:linear-gradient(90deg,var(--accent),var(--accent2)); transition:width 0.4s ease;
}
input:focus ~ .input-line { width:100%; }

/* PIN dots */
.pin-dots {
  display:flex; gap:8px; position:absolute; right:14px; top:50%;
  transform:translateY(-50%); pointer-events:none;
}
.dot {
  width:10px; height:10px; border-radius:50%; border:1px solid var(--muted);
  transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1);
}
.dot.filled { background:var(--accent); border-color:var(--accent); box-shadow:0 0 12px var(--accent); transform:scale(1.3); }
.pin-field { padding-right:60px !important; font-size:20px; letter-spacing:0.3em; }

/* Read-only username field */
input[readonly] {
  background: rgba(0,255,231,0.02);
  color: var(--accent);
  cursor: not-allowed;
  border-color: rgba(0,255,231,0.08);
}

/* Password strength */
.strength-bar { display:flex; gap:4px; margin-top:6px; }
.strength-seg {
  flex:1; height:3px; background:rgba(255,255,255,0.07);
  transition:background 0.3s, box-shadow 0.3s;
}
.strength-seg.s1 { background:var(--error); box-shadow:0 0 6px var(--error); }
.strength-seg.s2 { background:var(--accent3); box-shadow:0 0 6px var(--accent3); }
.strength-seg.s3 { background:var(--accent); box-shadow:0 0 6px var(--accent); }
.strength-label { font-size:9px; letter-spacing:0.1em; color:var(--muted); text-align:right; margin-top:4px; }

/* Button */
.btn {
  width:100%; background:transparent; border:1px solid var(--accent); color:var(--accent);
  font-family:'Orbitron',sans-serif; font-size:12px; font-weight:700; letter-spacing:0.2em;
  text-transform:uppercase; padding:15px; cursor:pointer; margin-top:8px;
  position:relative; overflow:hidden; transition:all 0.3s;
}
.btn::before {
  content:''; position:absolute; inset:0; background:var(--accent);
  transform:translateX(-101%); transition:transform 0.3s ease; z-index:0;
}
.btn:hover::before { transform:translateX(0); }
.btn:hover { color:#020408; box-shadow:0 0 30px rgba(0,255,231,0.5); }
.btn:active { transform:scale(0.99); }
.btn span { position:relative; z-index:1; }
.btn-loader { position:absolute; bottom:0; left:0; height:2px; width:0; background:var(--accent); transition:width 1.1s ease; z-index:2; }
.btn.loading .btn-loader { width:100%; }
.btn.loading { pointer-events:none; }

/* Message */
.message { margin-top:14px; padding:10px 14px; font-size:11px; letter-spacing:0.06em; display:none; }
.message.error   { display:block; border:1px solid rgba(255,58,110,0.3); color:var(--error); background:rgba(255,58,110,0.06); animation:msgIn 0.3s ease; }
.message.success { display:block; border:1px solid rgba(0,255,231,0.3); color:var(--accent); background:rgba(0,255,231,0.06); animation:msgIn 0.3s ease; }
@keyframes msgIn { from{opacity:0;transform:translateX(-10px);} to{opacity:1;transform:translateX(0);} }

.attempts-bar { display:flex; gap:4px; margin-top:12px; justify-content:flex-end; }
.attempt-block { width:18px; height:4px; background:rgba(0,255,231,0.12); border:1px solid rgba(0,255,231,0.1); transition:all 0.3s; }
.attempt-block.used { background:var(--error); border-color:var(--error); box-shadow:0 0 6px var(--error); }

/* Switch link */
.switch-link {
  text-align:center; margin-top:18px; font-size:10px; color:var(--muted); letter-spacing:0.1em;
}
.switch-link a { color:var(--accent); text-decoration:none; cursor:pointer; }
.switch-link a:hover { text-shadow:0 0 8px var(--accent); }

/* Registered users badge */
.reg-badge {
  display:flex; align-items:center; gap:8px; margin-bottom:20px;
  background:rgba(0,255,231,0.05); border:1px solid rgba(0,255,231,0.12);
  padding:8px 12px; font-size:10px; color:var(--muted); letter-spacing:0.1em;
}
.reg-badge .dot-live {
  width:7px; height:7px; border-radius:50%; background:var(--accent);
  box-shadow:0 0 8px var(--accent); animation:blinkDot 1.2s ease-in-out infinite; flex-shrink:0;
}
.reg-badge span { color:var(--accent); }

/* Shake */
@keyframes shake {
  0%,100%{transform:translateX(0);}
  20%{transform:translateX(-10px) rotate(-0.5deg);}
  40%{transform:translateX(10px) rotate(0.5deg);}
  60%{transform:translateX(-7px);}
  80%{transform:translateX(7px);}
}
.shake { animation:shake 0.45s ease !important; }

/* ── WARP ── */
#warp-canvas { position:fixed; inset:0; z-index:15; display:none; pointer-events:none; }

/* ── WELCOME PAGE ── */
#welcome-page {
  position:fixed; inset:0; z-index:20;
  display:none; align-items:center; justify-content:center;
  flex-direction:column; text-align:center;
}
#welcome-page.active { display:flex; }

.welcome-glitch {
  font-family:'Orbitron',sans-serif; font-size:clamp(28px,5.5vw,64px); font-weight:900;
  letter-spacing:0.1em; color:var(--accent); text-shadow:0 0 40px rgba(0,255,231,0.7);
  position:relative; animation:welcomeIn 0.7s 0.2s both cubic-bezier(0.16,1,0.3,1);
}
@keyframes welcomeIn {
  from{opacity:0;transform:scale(0.6);letter-spacing:0.5em;}
  to{opacity:1;transform:scale(1);letter-spacing:0.1em;}
}
.welcome-glitch::before, .welcome-glitch::after {
  content:attr(data-text); position:absolute; inset:0; text-align:center;
}
.welcome-glitch::before { color:var(--accent2); animation:glitch1 3.5s 1.5s infinite; clip-path:inset(0 0 55% 0); }
.welcome-glitch::after  { color:var(--accent3); animation:glitch2 3.5s 1.5s infinite; clip-path:inset(55% 0 0 0); }
@keyframes glitch1 {
  0%,92%,100%{transform:translateX(0);opacity:0;}
  93%{transform:translateX(-5px);opacity:0.9;}
  95%{transform:translateX(5px);opacity:0.9;}
  97%{transform:translateX(-2px);opacity:0;}
}
@keyframes glitch2 {
  0%,90%,100%{transform:translateX(0);opacity:0;}
  91%{transform:translateX(5px);opacity:0.9;}
  93%{transform:translateX(-5px);opacity:0.9;}
  95%{transform:translateX(2px);opacity:0;}
}

/* Personalized welcome name */
.welcome-name-line {
  font-family:'Orbitron',sans-serif;
  font-size:clamp(14px,2.5vw,22px);
  font-weight:700;
  letter-spacing:0.2em;
  margin-top:14px;
  animation: fadeUp 0.7s 0.6s both;
  background: linear-gradient(90deg, var(--accent3), #fff, var(--accent));
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmer 3s linear infinite, fadeUp 0.7s 0.6s both;
}

.welcome-sub { font-size:11px; color:var(--muted); letter-spacing:0.3em; text-transform:uppercase; margin-top:10px; animation:fadeUp 0.6s 0.9s both; }

.welcome-divider {
  width:220px; height:1px; margin:24px auto;
  background:linear-gradient(90deg,transparent,var(--accent),transparent);
  animation:fadeUp 0.6s 1s both;
}

@keyframes fadeUp {
  from{opacity:0;transform:translateY(16px);}
  to{opacity:1;transform:translateY(0);}
}

.welcome-stats { display:flex; gap:48px; animation:fadeUp 0.6s 1.1s both; }
.stat { text-align:center; }
.stat-val { font-family:'Orbitron',sans-serif; font-size:28px; font-weight:700; color:var(--accent); display:block; }
.stat-label { font-size:9px; letter-spacing:0.22em; color:var(--muted); text-transform:uppercase; margin-top:4px; }

.welcome-user { margin-top:28px; font-size:11px; letter-spacing:0.15em; color:rgba(0,255,231,0.45); animation:fadeUp 0.6s 1.3s both; }
.welcome-user span { color:var(--accent); }

.boot-lines {
  position:absolute; bottom:50px; left:50%; transform:translateX(-50%);
  font-size:10px; color:rgba(0,255,231,0.3); letter-spacing:0.08em; text-align:left; min-width:380px;
}
.boot-line { overflow:hidden; white-space:nowrap; width:0; animation:typeOut 0.5s forwards; }
.boot-line:nth-child(1){animation-delay:1.6s;}
.boot-line:nth-child(2){animation-delay:2.1s;}
.boot-line:nth-child(3){animation-delay:2.6s;}
.boot-line:nth-child(4){animation-delay:3.1s;color:var(--accent);}
@keyframes typeOut { to{width:100%;} }

.orb { position:absolute; border-radius:50%; filter:blur(60px); pointer-events:none; animation:orbFloat ease-in-out infinite; opacity:0; }
.orb.active { opacity:1; transition:opacity 1s; }
@keyframes orbFloat {
  0%,100%{transform:translate(0,0) scale(1);}
  33%{transform:translate(30px,-40px) scale(1.1);}
  66%{transform:translate(-20px,20px) scale(0.9);}
}
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>
<div class="particles" id="particles"></div>
<div class="scanlines"></div>
<div class="scan-beam"></div>

<div class="corner corner-tl"></div>
<div class="corner corner-tr"></div>
<div class="corner corner-bl"></div>
<div class="corner corner-br"></div>

<div class="ticker">
  <div class="ticker-inner">
    ⬤ SYSTEM ONLINE &nbsp;|&nbsp; ENCRYPTION: AES-256 &nbsp;|&nbsp; FIREWALL: ACTIVE &nbsp;|&nbsp; UPTIME: 99.97% &nbsp;|&nbsp; THREAT LEVEL: LOW &nbsp;|&nbsp; NODES: 128 CONNECTED &nbsp;|&nbsp; VERSION: 3.1.4
    &nbsp;&nbsp;&nbsp;&nbsp;
    ⬤ SYSTEM ONLINE &nbsp;|&nbsp; ENCRYPTION: AES-256 &nbsp;|&nbsp; FIREWALL: ACTIVE &nbsp;|&nbsp; UPTIME: 99.97% &nbsp;|&nbsp; THREAT LEVEL: LOW &nbsp;|&nbsp; NODES: 128 CONNECTED &nbsp;|&nbsp; VERSION: 3.1.4
  </div>
</div>

<!-- ════════════ LOGIN PAGE ════════════ -->
<div class="page-wrapper" id="login-page">
  <div class="system-id">SYSTEM ID: <span id="sys-id">SYS-████-████</span></div>
  <div class="card" id="login-card">
    <div class="logo-area">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 4a3 3 0 110 6 3 3 0 010-6zm0 8c2.67 0 8 1.34 8 4v1H4v-1c0-2.66 5.33-4 8-4z"/></svg>
        <div class="logo-ring"></div>
      </div>
      <div class="logo-title">ADMIN PORTAL</div>
      <div class="logo-sub">Secure Terminal — Level 5 Clearance</div>
    </div>

    <!-- TAB BAR -->
    <div class="tab-bar">
      <button class="tab-btn active" id="tab-login" onclick="switchTab('login')">⟶ LOGIN</button>
      <button class="tab-btn" id="tab-register" onclick="switchTab('register')">⊕ REGISTER</button>
    </div>

    <!-- ── LOGIN FORM ── -->
    <div id="form-login">
      <div class="reg-badge" id="user-count-badge">
        <div class="dot-live"></div>
        <span id="reg-count">0</span> registered operator(s) in system
      </div>

      <div class="field">
        <label>Username</label>
        <div class="input-wrap">
          <input type="text" id="l-username" placeholder="Enter username" autocomplete="off" />
          <div class="input-line"></div>
        </div>
      </div>

      <div class="field">
        <label>PIN Code</label>
        <div class="input-wrap">
          <input type="password" class="pin-field" id="l-pin" maxlength="2" placeholder="••" inputmode="numeric" autocomplete="off" />
          <div class="pin-dots">
            <div class="dot" id="l-dot1"></div>
            <div class="dot" id="l-dot2"></div>
          </div>
          <div class="input-line"></div>
        </div>
      </div>

      <button class="btn" id="login-btn" onclick="handleLogin()">
        <span id="login-btn-text">⟶ AUTHENTICATE</span>
        <div class="btn-loader" id="login-loader"></div>
      </button>

      <div class="attempts-bar">
        <div class="attempt-block" id="a1"></div>
        <div class="attempt-block" id="a2"></div>
        <div class="attempt-block" id="a3"></div>
      </div>

      <div class="message" id="login-msg"></div>
      <div class="switch-link">No account? <a onclick="switchTab('register')">Register here →</a></div>
    </div>

    <!-- ── REGISTER FORM ── -->
    <div id="form-register" style="display:none">
      <div class="field">
        <label>Full Name</label>
        <div class="input-wrap">
          <input type="text" id="r-name" placeholder="Your full name" autocomplete="off" />
          <div class="input-line"></div>
        </div>
      </div>

      <div class="field">
        <label>Username</label>
        <div class="input-wrap">
          <input type="text" id="r-username" value="admin" readonly />
          <div class="input-line"></div>
        </div>
      </div>

      <div class="field">
        <label>Set PIN Code (2 digits)</label>
        <div class="input-wrap">
          <input type="password" class="pin-field" id="r-pin" maxlength="2" placeholder="••" inputmode="numeric" autocomplete="off" />
          <div class="pin-dots">
            <div class="dot" id="r-dot1"></div>
            <div class="dot" id="r-dot2"></div>
          </div>
          <div class="input-line"></div>
        </div>
        <div class="strength-bar">
          <div class="strength-seg" id="ps1"></div>
          <div class="strength-seg" id="ps2"></div>
        </div>
        <div class="strength-label" id="pin-strength-label"></div>
      </div>

      <div class="field">
        <label>Confirm PIN</label>
        <div class="input-wrap">
          <input type="password" class="pin-field" id="r-pin2" maxlength="2" placeholder="••" inputmode="numeric" autocomplete="off" />
          <div class="pin-dots">
            <div class="dot" id="r-dot3"></div>
            <div class="dot" id="r-dot4"></div>
          </div>
          <div class="input-line"></div>
        </div>
      </div>

      <button class="btn" id="register-btn" onclick="handleRegister()">
        <span id="register-btn-text">⊕ CREATE ACCOUNT</span>
        <div class="btn-loader" id="register-loader"></div>
      </button>

      <div class="message" id="register-msg"></div>
      <div class="switch-link">Already registered? <a onclick="switchTab('login')">Login →</a></div>
    </div>
  </div>
</div>

<!-- WARP -->
<canvas id="warp-canvas"></canvas>

<!-- ════════════ WELCOME PAGE ════════════ -->
<div id="welcome-page">
  <div class="orb" id="orb1" style="width:400px;height:400px;background:rgba(0,255,231,0.15);top:10%;left:5%;animation-duration:8s;"></div>
  <div class="orb" id="orb2" style="width:300px;height:300px;background:rgba(255,0,170,0.12);bottom:10%;right:5%;animation-duration:10s;animation-delay:2s;"></div>
  <div class="orb" id="orb3" style="width:250px;height:250px;background:rgba(255,225,0,0.08);top:50%;left:50%;animation-duration:12s;animation-delay:1s;"></div>

  <div class="welcome-glitch" data-text="ACCESS GRANTED">ACCESS GRANTED</div>
  <div class="welcome-name-line" id="welcome-name-line">WELCOME, ADMINISTRATOR</div>
  <div class="welcome-sub">Authorization Complete — Session Active</div>
  <div class="welcome-divider"></div>

  <div class="welcome-stats">
    <div class="stat"><span class="stat-val" id="stat-level">00</span><div class="stat-label">Clearance Level</div></div>
    <div class="stat"><span class="stat-val" id="stat-nodes">0</span><div class="stat-label">Active Nodes</div></div>
    <div class="stat"><span class="stat-val" id="stat-enc">0</span><div class="stat-label">Bit Encryption</div></div>
  </div>

  <div class="welcome-user">Logged in as: <span>ADMIN</span> &nbsp;|&nbsp; Session: <span id="session-id">—</span></div>

  <div class="boot-lines">
    <div class="boot-line">&gt; Loading admin dashboard modules...</div>
    <div class="boot-line">&gt; Establishing secure tunnel......... OK</div>
    <div class="boot-line">&gt; Syncing 128 nodes..................... DONE</div>
    <div class="boot-line" id="boot-final">&gt; Welcome, Administrator. All systems nominal. _</div>
  </div>
</div>

<script>
/* ════════════════════════════════════════════
   DATA STORE  (persists in localStorage)
════════════════════════════════════════════ */
const STORE_KEY = 'admin_portal_users';

function loadUsers() {
  try { return JSON.parse(localStorage.getItem(STORE_KEY)) || []; }
  catch { return []; }
}

function saveUsers(users) {
  localStorage.setItem(STORE_KEY, JSON.stringify(users));
}

function findUser(username, pin) {
  return loadUsers().find(u => u.username === username && u.pin === pin) || null;
}

function userExists(username) {
  return loadUsers().some(u => u.username === username);
}

function registerUser(name, username, pin) {
  const users = loadUsers();
  users.push({ name, username, pin, createdAt: Date.now() });
  saveUsers(users);
}

function updateUserCount() {
  document.getElementById('reg-count').textContent = loadUsers().length;
}

/* ════════════════════════════════════════════
   TAB SWITCHER
════════════════════════════════════════════ */
function switchTab(tab) {
  const isLogin = tab === 'login';
  document.getElementById('form-login').style.display    = isLogin ? 'block' : 'none';
  document.getElementById('form-register').style.display = isLogin ? 'none'  : 'block';
  document.getElementById('tab-login').classList.toggle('active', isLogin);
  document.getElementById('tab-register').classList.toggle('active', !isLogin);
  clearMsg('login-msg');
  clearMsg('register-msg');
}

/* ════════════════════════════════════════════
   LOGIN
════════════════════════════════════════════ */
let attempts = 0;
const MAX_ATT = 3;

document.getElementById('l-pin').addEventListener('input', function() {
  this.value = this.value.replace(/\D/g,'').slice(0,2);
  const l = this.value.length;
  document.getElementById('l-dot1').classList.toggle('filled', l >= 1);
  document.getElementById('l-dot2').classList.toggle('filled', l >= 2);
});

document.addEventListener('keydown', e => { if (e.key === 'Enter') {
  const regVisible = document.getElementById('form-register').style.display !== 'none';
  regVisible ? handleRegister() : handleLogin();
}});

function handleLogin() {
  if (attempts >= MAX_ATT) { showMsg('login-msg','error','⛔ LOCKED — Max attempts exceeded.'); return; }
  const username = document.getElementById('l-username').value.trim();
  const pin      = document.getElementById('l-pin').value.trim();
  const btn      = document.getElementById('login-btn');
  clearMsg('login-msg');

  if (!username || !pin) { showMsg('login-msg','error','⚠ MISSING INPUT — All fields required.'); shakeCard(); return; }

  btn.classList.add('loading');
  document.getElementById('login-btn-text').textContent = 'VERIFYING...';

  setTimeout(() => {
    const user = findUser(username, pin);
    if (user) {
      showMsg('login-msg','success','✓ IDENTITY CONFIRMED — Launching session…');
      setTimeout(() => startWarp(user), 900);
    } else {
      btn.classList.remove('loading');
      document.getElementById('login-btn-text').textContent = '⟶ AUTHENTICATE';
      attempts++;
      document.getElementById('a' + attempts)?.classList.add('used');
      shakeCard();
      const rem = MAX_ATT - attempts;
      if (rem > 0) {
        showMsg('login-msg','error',`✗ ACCESS DENIED — ${rem} attempt${rem!==1?'s':''} remaining.`);
      } else {
        showMsg('login-msg','error','⛔ SYSTEM LOCKED — Contact administrator.');
      }
    }
  }, 1300);
}

/* ════════════════════════════════════════════
   REGISTER
════════════════════════════════════════════ */
document.getElementById('r-pin').addEventListener('input', function() {
  this.value = this.value.replace(/\D/g,'').slice(0,2);
  const l = this.value.length;
  document.getElementById('r-dot1').classList.toggle('filled', l >= 1);
  document.getElementById('r-dot2').classList.toggle('filled', l >= 2);
  updatePinStrength(this.value);
});

document.getElementById('r-pin2').addEventListener('input', function() {
  this.value = this.value.replace(/\D/g,'').slice(0,2);
  const l = this.value.length;
  document.getElementById('r-dot3').classList.toggle('filled', l >= 1);
  document.getElementById('r-dot4').classList.toggle('filled', l >= 2);
});

function updatePinStrength(pin) {
  const s1 = document.getElementById('ps1');
  const s2 = document.getElementById('ps2');
  const lbl = document.getElementById('pin-strength-label');
  s1.className = 'strength-seg';
  s2.className = 'strength-seg';
  lbl.textContent = '';

  if (pin.length === 0) return;

  // Simple PIN strength: avoid 00,11,22...99 or sequential like 12,23
  const isRepeat = pin[0] === pin[1];
  const isSeq    = Math.abs(parseInt(pin[0]) - parseInt(pin[1])) === 1;

  if (pin.length === 1) {
    s1.classList.add('s1'); lbl.textContent = 'ENTER 2ND DIGIT'; lbl.style.color = 'var(--muted)';
  } else if (isRepeat) {
    s1.classList.add('s1'); lbl.textContent = 'WEAK PIN'; lbl.style.color = 'var(--error)';
  } else if (isSeq) {
    s1.classList.add('s2'); s2.classList.add('s2'); lbl.textContent = 'MODERATE PIN'; lbl.style.color = 'var(--accent3)';
  } else {
    s1.classList.add('s3'); s2.classList.add('s3'); lbl.textContent = 'STRONG PIN'; lbl.style.color = 'var(--accent)';
  }
}

function handleRegister() {
  const name  = document.getElementById('r-name').value.trim();
  const uname = document.getElementById('r-username').value.trim();
  const pin   = document.getElementById('r-pin').value.trim();
  const pin2  = document.getElementById('r-pin2').value.trim();
  const btn   = document.getElementById('register-btn');
  clearMsg('register-msg');

  if (!name)              { showMsg('register-msg','error','⚠ NAME required.'); return; }
  if (name.length < 2)    { showMsg('register-msg','error','⚠ NAME too short.'); return; }
  if (!pin || pin.length < 2) { showMsg('register-msg','error','⚠ Enter a 2-digit PIN.'); return; }
  if (pin !== pin2)       { showMsg('register-msg','error','✗ PINs do not match.'); shakeCard(); return; }
  if (userExists(uname))  { showMsg('register-msg','error','⚠ Username already registered. Try logging in.'); return; }

  btn.classList.add('loading');
  document.getElementById('register-btn-text').textContent = 'REGISTERING...';

  setTimeout(() => {
    registerUser(name, uname, pin);
    btn.classList.remove('loading');
    document.getElementById('register-btn-text').textContent = '⊕ CREATE ACCOUNT';
    showMsg('register-msg','success',`✓ REGISTERED as "${name}". Switching to login…`);
    updateUserCount();

    // Clear fields & switch to login after brief pause
    setTimeout(() => {
      document.getElementById('r-name').value = '';
      document.getElementById('r-pin').value  = '';
      document.getElementById('r-pin2').value = '';
      ['r-dot1','r-dot2','r-dot3','r-dot4'].forEach(id => document.getElementById(id).classList.remove('filled'));
      ['ps1','ps2'].forEach(id => { document.getElementById(id).className = 'strength-seg'; });
      document.getElementById('pin-strength-label').textContent = '';
      switchTab('login');
    }, 2000);
  }, 1200);
}

/* ════════════════════════════════════════════
   UTILITIES
════════════════════════════════════════════ */
function showMsg(id, type, text) {
  const m = document.getElementById(id);
  m.textContent = text; m.className = 'message ' + type;
}
function clearMsg(id) {
  const m = document.getElementById(id);
  m.className = 'message'; m.style.display = 'none';
}
function shakeCard() {
  const c = document.getElementById('login-card');
  c.classList.remove('shake'); void c.offsetWidth; c.classList.add('shake');
}

/* ════════════════════════════════════════════
   MATRIX RAIN
════════════════════════════════════════════ */
const bgCanvas = document.getElementById('bg-canvas');
const bgCtx    = bgCanvas.getContext('2d');
let bgW, bgH, drops;
const CHARS = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホ';

function resizeBg() {
  bgW = bgCanvas.width  = window.innerWidth;
  bgH = bgCanvas.height = window.innerHeight;
  drops = Array.from({length: Math.floor(bgW/20)}, () => (Math.random()*bgH/14)|0);
}
function drawBg() {
  bgCtx.fillStyle = 'rgba(2,4,8,0.09)';
  bgCtx.fillRect(0,0,bgW,bgH);
  bgCtx.font = '13px Share Tech Mono';
  drops.forEach((y,i) => {
    const ch = CHARS[Math.random()*CHARS.length|0];
    bgCtx.globalAlpha = Math.max(0.03, 0.35-(y/(bgH/14))*0.08);
    bgCtx.fillStyle = i%7===0 ? '#ff00aa' : '#00ffe7';
    bgCtx.fillText(ch, i*20, y*14);
    bgCtx.globalAlpha = 1;
    if (y*14 > bgH && Math.random() > 0.975) drops[i] = 0;
    else drops[i]++;
  });
}
resizeBg(); setInterval(drawBg, 55); window.addEventListener('resize', resizeBg);

/* ════════════════════════════════════════════
   PARTICLES
════════════════════════════════════════════ */
const pe = document.getElementById('particles');
for (let i = 0; i < 45; i++) {
  const p = document.createElement('div'); p.className = 'particle';
  const size = Math.random()*4+2;
  p.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}%;background:${['#00ffe7','#ff00aa','#ffe100'][i%3]};animation-duration:${Math.random()*8+6}s;animation-delay:${Math.random()*8}s;`;
  pe.appendChild(p);
}

/* ════════════════════════════════════════════
   SYSTEM ID SCRAMBLE
════════════════════════════════════════════ */
const HEX = '0123456789ABCDEF';
function scrambleId() {
  const el = document.getElementById('sys-id'); let i = 0;
  const id = setInterval(() => {
    el.textContent = 'SYS-' + Array.from({length:4},()=>HEX[Math.random()*16|0]).join('') + '-' + Array.from({length:4},()=>HEX[Math.random()*16|0]).join('');
    if (++i > 14) clearInterval(id);
  }, 75);
}
scrambleId();

/* ════════════════════════════════════════════
   WARP TRANSITION
════════════════════════════════════════════ */
function startWarp(user) {
  const wc = document.getElementById('warp-canvas');
  const ctx = wc.getContext('2d');
  wc.style.display = 'block';
  wc.width = window.innerWidth; wc.height = window.innerHeight;
  const W = wc.width, H = wc.height, cx = W/2, cy = H/2;

  const STARS = Array.from({length:350}, () => ({
    angle: Math.random()*Math.PI*2,
    dist:  Math.random()*80+5,
    speed: Math.random()*6+3,
    hue:   Math.random()<0.5 ? 170 : (Math.random()<0.5 ? 310 : 50),
  }));

  let frame = 0; const TOTAL = 90;
  (function drawWarp() {
    ctx.fillStyle = frame<15 ? 'rgba(2,4,8,0.12)' : 'rgba(2,4,8,0.22)';
    ctx.fillRect(0,0,W,H);
    const mult = 1+(frame/TOTAL)*10;
    STARS.forEach(s => {
      const pd = s.dist; s.dist += s.speed*mult;
      ctx.beginPath();
      ctx.moveTo(cx+Math.cos(s.angle)*pd, cy+Math.sin(s.angle)*pd);
      ctx.lineTo(cx+Math.cos(s.angle)*s.dist, cy+Math.sin(s.angle)*s.dist);
      ctx.strokeStyle = `hsla(${s.hue},100%,70%,${Math.min(1,frame/15)})`;
      ctx.lineWidth = Math.min(3, 0.5+frame/25); ctx.stroke();
      if (s.dist > Math.max(W,H)) { s.dist=Math.random()*20; s.angle=Math.random()*Math.PI*2; }
    });
    if (frame > TOTAL-12) {
      const a = (frame-(TOTAL-12))/12;
      ctx.fillStyle = `rgba(0,255,231,${a})`; ctx.fillRect(0,0,W,H);
    }
    frame++;
    if (frame <= TOTAL) requestAnimationFrame(drawWarp);
    else showWelcome(user);
  })();
}

/* ════════════════════════════════════════════
   WELCOME
════════════════════════════════════════════ */
function showWelcome(user) {
  document.getElementById('login-page').style.display = 'none';
  document.getElementById('warp-canvas').style.display = 'none';

  // Personalized name line
  const displayName = user.name ? user.name.toUpperCase() : 'ADMINISTRATOR';
  const nameEl = document.getElementById('welcome-name-line');
  nameEl.textContent = `WELCOME, ${displayName}`;
  nameEl.setAttribute('data-text', `WELCOME, ${displayName}`);

  // Update last boot line
  document.getElementById('boot-final').textContent =
    `> Welcome, ${user.name || 'Administrator'}. All systems nominal. _`;

  document.getElementById('session-id').textContent =
    Array.from({length:8},()=>HEX[Math.random()*16|0]).join('');

  const wp = document.getElementById('welcome-page');
  wp.classList.add('active');

  setTimeout(() => {
    ['orb1','orb2','orb3'].forEach(id => document.getElementById(id).classList.add('active'));
  }, 300);

  animateCount('stat-level', 0, 5,  1800, v => v.toString().padStart(2,'0'));
  animateCount('stat-nodes', 0, 128, 2200);
  animateCount('stat-enc',   0, 256, 2200);
}

function animateCount(id, from, to, dur, fmt = v => String(v)) {
  const el = document.getElementById(id);
  const delay = 1500;
  setTimeout(() => {
    const start = performance.now();
    function tick(now) {
      const t = Math.min((now-start)/dur,1);
      const ease = t<0.5 ? 2*t*t : -1+(4-2*t)*t;
      el.textContent = fmt(Math.round(from+(to-from)*ease));
      if (t<1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  }, delay);
}

/* ════════════════════════════════════════════
   INIT
════════════════════════════════════════════ */
updateUserCount();
</script>
</body>
</html>
